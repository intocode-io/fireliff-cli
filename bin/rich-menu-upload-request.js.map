{"version":3,"sources":["../lib/rich-menu-upload-request.js"],"names":["RichMenuUploadRequest","RichMenuRequest","constructor","options","contentType","send","richMenuId","imagePath","Promise","resolve","reject","readStream","fs","createReadStream","stat","err","stats","axios","defaults","headers","common","size","post"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEO,MAAMA,qBAAN,SAAoCC,gCAApC,CAAoD;AACzDC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,UAAM,EAAE,GAAGA,OAAL;AAAc,SAAG;AAAEC,QAAAA,WAAW,EAAE;AAAf;AAAjB,KAAN;AACD;;AACDC,EAAAA,IAAI,CAACC,UAAD,EAAaC,SAAb,EAAwB;AAC1B,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,YAAMC,UAAU,GAAGC,EAAE,CAACC,gBAAH,CAAoBN,SAApB,CAAnB;AAEAK,MAAAA,EAAE,CAACE,IAAH,CAAQP,SAAR,EAAmB,CAACQ,GAAD,EAAMC,KAAN,KAAgB;AACjC,YAAID,GAAJ,EAAS;AACP,iBAAOL,MAAM,CAACK,GAAD,CAAb;AACD;;AAED,aAAKE,KAAL,CAAWC,QAAX,CAAoBC,OAApB,CAA4BC,MAA5B,CAAmC,gBAAnC,IAAuDJ,KAAK,CAACK,IAA7D;AAEA,eAAOZ,OAAO,CACZ,KAAKQ,KAAL,CAAWK,IAAX,CACG,uCAAsChB,UAAW,UADpD,EAEEK,UAFF,CADY,CAAd;AAMD,OAbD;AAcD,KAjBM,CAAP;AAkBD;;AAvBwD","sourcesContent":["import * as fs from 'fs';\nimport { RichMenuRequest } from './rich-menu-request';\n\nexport class RichMenuUploadRequest extends RichMenuRequest {\n  constructor(options) {\n    super({ ...options, ...{ contentType: 'image/jpeg' } });\n  }\n  send(richMenuId, imagePath) {\n    return new Promise((resolve, reject) => {\n      const readStream = fs.createReadStream(imagePath);\n\n      fs.stat(imagePath, (err, stats) => {\n        if (err) {\n          return reject(err);\n        }\n\n        this.axios.defaults.headers.common['content-length'] = stats.size;\n\n        return resolve(\n          this.axios.post(\n            `https://api.line.me/v2/bot/richmenu/${richMenuId}/content`,\n            readStream\n          )\n        );\n      });\n    });\n  }\n}\n"],"file":"rich-menu-upload-request.js"}